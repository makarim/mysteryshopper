
<?php include_once("header.html")?>


<div id="wrap">  <br />
  <div class="tabsA">
    	<div class="left">

        	<div class="right">新用户注册</div>
        </div>
      <div class="des">已经是注册用户？请点击<a href="/index.php/passport/login">这里</a>登录！</div>
  </div>
  <div class="regStep regStep2 clear"></div>
  <div class="regInfo">

<FORM name="registerform" id="registerform" method="POST" onsubmit="return checkOnSubmit('registerform', rules);" >
<input type="hidden" name="action" value="passport">
<input type="hidden" name="op" value="saveuser">


<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD width="40%" class="text"></TD>
<TD width="60%"><div id="msg" style="margin:0 auto;"></div></TD>
</TR
<TR>
<TR>
<TD width="40%" class="text"></TD>
<TD width="60%">一．联系方式</TD>
</TR
<TR>
<TD width="40%" class="text">姓名:</TD>
<TD width="60%"><div id="errorsDiv_realname"></div><INPUT class="textfield" type="text" name="realname" value="" id="realname" /></TD>
</TR>

<TR><TD class="text">手机:</TD>
<TD><div id="errorsDiv_mobile"></div><INPUT class="textfield" type="text" name="mobile"  /></TD>
</TR>
<TR>
<TD class="text">电话:</TD>
<TD><div id="errorsDiv_phone"></div><INPUT class="textfield" type="password" name="phone"  /></TD>
</TR>

<TR>
<TD class="text">QQ:</TD>
<TD><div id="errorsDiv_qq"></div><INPUT class="textfield" type="text" name="qq" value="" /></TD>
</TR>
<TR>
<TD class="text">MSN:</TD>
<TD><div id="errorsDiv_msn"></div><INPUT class="textfield" type="text" name="msn" value="" /></TD>
</TR>
<TR>
<TD class="text">居住城市:</TD>
<TD><div id="errorsDiv_city"></div><INPUT class="textfield" type="text" name="city" value="" /></TD>
</TR>

<TR>
<TD class="text">住址:</TD>
<TD><div id="errorsDiv_address"></div><INPUT class="textfield" type="text" name="address" value="" /></TD>
</TR>

<TR>
<TD class="text"></TD>
<TD>二    个人信息情况</TD>
</TR>

<TR>
<TD class="text">生日:</TD>
<TD><div id="errorsDiv_birth"></div><select name="Birthdate_Day" id="Birthdate_Day"> 
			<option value="1">1</option> 
			<option value="2">2</option> 
			<option value="3">3</option> 
			<option value="4">4</option> 
			<option value="5">5</option> 
			<option value="6">6</option> 
			<option value="7">7</option> 
			<option value="8">8</option> 
			<option value="9">9</option> 
			<option value="10">10</option> 
			<option value="11">11</option> 
			<option value="12">12</option> 
			<option value="13">13</option> 
			<option value="14">14</option> 
			<option value="15">15</option> 
			<option value="16">16</option> 
			<option value="17">17</option> 
			<option value="18">18</option> 
			<option value="19">19</option> 
			<option value="20">20</option> 
			<option value="21">21</option> 
			<option value="22">22</option> 
			<option value="23">23</option> 
			<option value="24">24</option> 
			<option value="25">25</option> 
			<option value="26">26</option> 
			<option value="27">27</option> 
			<option value="28">28</option> 
			<option value="29">29</option> 
			<option value="30">30</option> 
			<option value="31">31</option> 
 
		</select><select name="Birthdate_Month" id="Birthdate_Month"> 
			<option value="1">January</option> 
			<option value="2">February</option> 
			<option value="3">March</option> 
			<option value="4">April</option> 
			<option value="5">May</option> 
			<option value="6">June</option> 
			<option value="7">July</option> 
			<option value="8">August</option> 
			<option value="9">September</option> 
			<option value="10">October</option> 
			<option value="11">November</option> 
			<option value="12">December</option> 
 
		</select><select name="Birthdate_Year" id="Birthdate_Year"> 
			<option value="1901">1901</option> 
			<option value="1902">1902</option> 
			<option value="1903">1903</option> 
			<option value="1904">1904</option> 
			<option value="1905">1905</option> 
			<option value="1906">1906</option> 
			<option value="1907">1907</option> 
			<option value="1908">1908</option> 
			<option value="1909">1909</option> 
			<option value="1910">1910</option> 
			<option value="1911">1911</option> 
			<option value="1912">1912</option> 
			<option value="1913">1913</option> 
			<option value="1914">1914</option> 
			<option value="1915">1915</option> 
			<option value="1916">1916</option> 
			<option value="1917">1917</option> 
			<option value="1918">1918</option> 
			<option value="1919">1919</option> 
			<option value="1920">1920</option> 
			<option value="1921">1921</option> 
			<option value="1922">1922</option> 
			<option value="1923">1923</option> 
			<option value="1924">1924</option> 
			<option value="1925">1925</option> 
			<option value="1926">1926</option> 
			<option value="1927">1927</option> 
			<option value="1928">1928</option> 
			<option value="1929">1929</option> 
			<option value="1930">1930</option> 
			<option value="1931">1931</option> 
			<option value="1932">1932</option> 
			<option value="1933">1933</option> 
			<option value="1934">1934</option> 
			<option value="1935">1935</option> 
			<option value="1936">1936</option> 
			<option value="1937">1937</option> 
			<option value="1938">1938</option> 
			<option value="1939">1939</option> 
			<option value="1940">1940</option> 
			<option value="1941">1941</option> 
			<option value="1942">1942</option> 
			<option value="1943">1943</option> 
			<option value="1944">1944</option> 
			<option value="1945">1945</option> 
			<option value="1946">1946</option> 
			<option value="1947">1947</option> 
			<option value="1948">1948</option> 
			<option value="1949">1949</option> 
			<option value="1950">1950</option> 
			<option value="1951">1951</option> 
			<option value="1952">1952</option> 
			<option value="1953">1953</option> 
			<option value="1954">1954</option> 
			<option value="1955">1955</option> 
			<option value="1956">1956</option> 
			<option value="1957">1957</option> 
			<option value="1958">1958</option> 
			<option value="1959">1959</option> 
			<option value="1960">1960</option> 
			<option value="1961">1961</option> 
			<option value="1962">1962</option> 
			<option value="1963">1963</option> 
			<option value="1964">1964</option> 
			<option value="1965">1965</option> 
			<option value="1966">1966</option> 
			<option value="1967">1967</option> 
			<option value="1968">1968</option> 
			<option value="1969">1969</option> 
			<option value="1970">1970</option> 
			<option value="1971">1971</option> 
			<option value="1972">1972</option> 
			<option value="1973">1973</option> 
			<option value="1974">1974</option> 
			<option value="1975">1975</option> 
			<option value="1976">1976</option> 
			<option value="1977">1977</option> 
			<option value="1978">1978</option> 
			<option value="1979">1979</option> 
			<option value="1980">1980</option> 
			<option value="1981">1981</option> 
			<option value="1982">1982</option> 
			<option value="1983">1983</option> 
			<option value="1984">1984</option> 
			<option value="1985">1985</option> 
			<option value="1986">1986</option> 
			<option value="1987">1987</option> 
			<option value="1988">1988</option> 
			<option value="1989">1989</option> 
			<option value="1990">1990</option> 
			<option value="1991">1991</option> 
			<option value="1992">1992</option> 
 
		</select></TD>
</TR>
<TR>
<TD class="text">婚姻:</TD>
<TD><div id="errorsDiv_marital"></div><select name="MaritalStatus" id="MaritalStatus"> 
<option value="0">选择...</option> 
			<option selected="selected" value="2">已婚</option> 
			<option value="1">单身</option> 
 </TD>
</TR>
<TR>
<TD class="text">国籍:</TD>
<TD><div id="errorsDiv_nationality"></div><INPUT class="textfield" type="text" name="nationality" value="" /></TD>
</TR>
<TR>
<TD class="text">职业:</TD>
<TD><div id="errorsDiv_occupation"></div><INPUT class="textfield" type="text" name="occupation" value="" /></TD>
</TR>
<TR>
<TD class="text">年收入:</TD>
<TD><div id="errorsDiv_annualincome"></div>
<select name="HouseholdIncome" id="HouseholdIncome" class="MainFont"> 
					<option selected="selected" value="0">选择...</option> 
					<option value="1">&lt;1.8万</option> 
					<option value="2">1.8万-2.5万</option> 
					<option value="3">2.5万-3.5万</option> 
					<option value="4">3.5万-4.5万</option> 
					<option value="5">5.5万-7.5万</option> 
					<option value="6">7.5万-10万</option> 
					<option value="7">10万以上</option> 
 </TD>
</TR>
<TR>
<TD class="text">教育程度:</TD>
<TD><div id="errorsDiv_education"></div><select name="Education" id="Education" class="MainFont"> 
<option value="0">选择...</option> 
					<option value="1">中学</option> 
					<option value="2">高中/中专</option> 
					<option value="3">本科/大专</option> 
					<option value="4">硕士</option> 
					<option value="5">博士</option> 
 
				</select></TD>
</TR>
<TR>
<TD class="text">您有私人汽车吗?:</TD>
<TD><div id="errorsDiv_hadcar"></div><select name="hadcar" id="hadcar"> 
<option value="0">选择...</option> 
					<option value="1">是</option> 
					<option value="0">否</option> 
 
				</select></TD>
</TR>


<TR>
<TD class="text"></TD>
<TD>三    其他信息</TD>
</TR>
<TR>
<TD class="text">每星期外出就餐次数?</TD>
<TD><div id="errorsDiv_weekoutingeat"></div><INPUT class="textfield" type="text" name="weekoutingeat" value="" /></TD>
</TR>
<TR>
<TD class="text">就餐平均消费：</TD>
<TD><div id="errorsDiv_avgbill"></div><INPUT class="textfield" type="text" name="avgbill" value="" />RMB</TD>
</TR>
<TR>
<TD class="text">每月您在服饰方面的消费?</TD>
<TD><div id="errorsDiv_apparel"></div><INPUT class="textfield" type="text" name="apparel" value="" />RMB</TD>
</TR>
<TR>
<TD class="text">您是如何知道我们的公司? </TD>
<TD><div id="errorsDiv_hearabout"></div><INPUT class="textfield" type="text" name="hearabout" value="" /></TD>
</TR>
<TR>
<TD class="text">你是否需要平时收到我们SPOT的最新动态? </TD>
<TD><div id="errorsDiv_newletters"></div><INPUT class="textfield" type="text" name="newletters" value="" /></TD>
</TR>

<TR>
<TD class="text"><?php echo lang('validatecode')?>:</TD>
<TD><div id="errorsDiv_code"></div><INPUT type="text" name="code" class="textfield" style="width:60px"/><img id="codeimg" src="<?php echo $www_site_url?>/index.php/identifycode/generate" align="absmiddle" title="<?php echo lang('anotherone')?>" onClick="changeCode();" style="cursor:pointer"></TD>
</TR>

<TR><TD class="text">&nbsp;</TD><TD><INPUT  type="image"  src="<?php echo $www_site_url?>/public/images/btn_submit.gif" value="<?php echo lang('signup')?>" name="registerbtn"/> 

</TD></TR>
</TABLE>
</form>

<SCRIPT>
//only for test purposes
function checkOnSubmit(formName, r) {
   // document.getElementById(yav_config.errorsdiv).className = '';
   // document.getElementById(yav_config.errorsdiv).style.display = 'none';
   // var alertType = document.getElementById('alertType').value;
    if (yav.performCheck(formName, r, 'inline')) {
    	
    	var url = "<?php echo $www_site_url?>/index.php";
		var params = mini.form.serialize($(formName));
		mini.ajax.post(url, function(r){
			var r = eval('(' + r + ')');   
			if(r.s==200){
				window.location.href = r.d;
			}
			if(r.s==400){
				$('msg').innerHTML = r.m;			
			}
		}, params);
    	
    	return false;
       
    } 
    return false;
}

var rules=new Array();
rules[0]='username|required|<?php echo lang('usernamerule')?>';
rules[1]='username|regexp|^[a-zA-Z][a-zA-Z0-9_]{1,13}[a-zA-Z0-9]$|<?php echo lang('usernamerule')?>';
rules[2]='email|required|<?php echo lang('insertemail')?>';
rules[3]='email|email|<?php echo lang('insertemail')?>';
rules[4]='password|required|<?php echo lang('insertpwd')?>';
rules[5]='password|minlength|6|<?php echo lang('pwdrule')?>';
rules[6]='comfirmpwd|equal|$password|<?php echo lang('pwdnotsame')?>';

rules[7]='sex|required|<?php echo lang('sexrule')?>';
rules[8]='code|required|<?php echo lang('coderule')?>';
rules[9]='nickname|required|<?php echo lang('nicknamerule')?>';

rules[10]='nickname|minlength|2|<?php echo lang('nicknamerule')?>';
rules[11]='nickname|maxlength|16|<?php echo lang('nicknamerule')?>';
rules[12]='question|required|<?php echo lang('selectaquestion')?>';
rules[13]='answer|required|<?php echo lang('youranswer')?>';


yav.addHelp('username', '<?php echo lang('usernamerule')?>');
yav.addHelp('password', '');
yav.addHelp('comfirmpwd', '');
yav.addHelp('email', '<?php echo lang('insertemail')?>');
yav.addHelp('question', '');
yav.addHelp('answer', '');
yav.addHelp('nickname', '');
yav.addHelp('sex', '');
yav.addHelp('code', '');
yav.postValidation_OnOK('email', 'blur', 'ajaxCall("email")');
yav.postValidation_OnOK('username', 'blur', 'ajaxCall("username")');



var captchaOK = 2;  // 2 - not yet checked, 1 - correct, 0 - failed
var account = '';
// a simple ajax implementation

function ajaxCall(s) {
	account = s;
	mini.ajax.get("<?php echo $www_site_url?>/index.php/passport/checkuser/user/" + escape(document.getElementById(s).value), function(r){
	    captchaOK = r;  
	    if(captchaOK != 1) {              
	      	yav.displayMsg(account, '<?php echo lang('userexist')?>', yav_config.innererror);
	      	document.registerform.registerbtn.disabled=true;
	      	return false;
	      } else {
	          yav.displayMsg(account, '<?php echo lang('userisok')?>', yav_config.innerhelp);      
	          document.registerform.registerbtn.disabled=false;
	          return true;
	      }
	});  
    return false;
}

function changeCode() {
	var num = 	new Date().getTime();
	var rand = Math.round(Math.random() * 10000);
	num = num + rand;
	document.getElementById("codeimg").src = "<?php echo $www_site_url?>/index.php/identifycode/generate/" + num;
	return false;
}
window.onload = function(){
	yav.init('registerform', rules);
}
</SCRIPT>
<p>&nbsp;</p>
  </div>
</div>
</div>
<?php include_once("footer.html")?>
