
<?php include_once("header.html")?>
<script src="<?php echo $www_site_url?>/public/js/PCASClass.js"></script>

<div id="wrap">  <br />
  <div class="tabsA">
    	<div class="left">

        	<div class="right"><?php echo lang("registration");?></div>
        </div>
      <div class="des"><?php echo lang("already_signup");?> <a href="<?php echo $www_site_url?>/index.php/passport/login"><?php echo lang("login");?>!</a></div>
  </div>
  <div class="<?php echo lang("regstepclass");?> regStep2 clear"></div>
  <div class="regInfo">

<FORM name="registerform" id="registerform" method="POST" onsubmit="return checkOnSubmit('registerform', rules);" >
<input type="hidden" name="action" value="passport">
<input type="hidden" name="op" value="saveuserext">


<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD width="40%" class="text"></TD>
<TD width="60%"><div id="msg" style="margin:0 auto;"></div></TD>
</TR
><TR>
<TR>
<TD width="40%" class="text"></TD>
<TD width="60%" class="text" style="text-align:left;">一．联系方式(*为必填项)</TD>
</TR
><TR>
<TD width="40%" class="text">*姓名:</TD>
<TD width="60%"><div id="errorsDiv_realname"></div><INPUT class="input" type="text" name="realname" value="" id="realname" /></TD>
</TR>

<TR><TD class="text">*手机:</TD>
<TD><div id="errorsDiv_mobile"></div><INPUT class="input" type="text" name="mobile" id="mobile" /></TD>
</TR>
<TR>
<TD class="text">*电话:</TD>
<TD><div id="errorsDiv_phone"></div><INPUT class="input" type="text" name="phone" id="phone"/></TD>
</TR>

<TR>
<TD class="text">*QQ:</TD>
<TD><div id="errorsDiv_qq"></div><INPUT class="input" type="text" name="qq" id="qq" value="" /></TD>
</TR>
<TR>
<TD class="text">*MSN:</TD>
<TD><div id="errorsDiv_msn"></div><INPUT class="input" type="text" name="msn" id="msn" value="" /></TD>
</TR>
<TR>
<TD class="text">*居住城市/区:</TD>
<TD><div id="errorsDiv_area"></div>
<select name="province" id="province"></select><select name="city" id="city"></select><select name="area" id="area"></select>
<script>
new PCAS("province","city","area");

</script>
</TD>
</TR>

<TR>
<TD class="text">住址:</TD>
<TD><div id="errorsDiv_address"></div><INPUT class="input" type="text" name="address" id="address" value="" /></TD>
</TR>

<TR>
<TD class="text"></TD>
<TD class="text"  style="text-align:left;">二    个人信息情况</TD>
</TR>

<TR>
<TD class="text">*生日:</TD>
<TD><div id="errorsDiv_birthdateyear"></div><select name="birthdateyear" id="birthdateyear"> 
			<option value="" selected="selected">-------------</option> 
			<option value="1921">1921</option> 
			<option value="1922">1922</option> 
			<option value="1923">1923</option> 
			<option value="1924">1924</option> 
			<option value="1925">1925</option> 
			<option value="1926">1926</option> 
			<option value="1927">1927</option> 
			<option value="1928">1928</option> 
			<option value="1929">1929</option> 
			<option value="1930">1930</option> 
			<option value="1931">1931</option> 
			<option value="1932">1932</option> 
			<option value="1933">1933</option> 
			<option value="1934">1934</option> 
			<option value="1935">1935</option> 
			<option value="1936">1936</option> 
			<option value="1937">1937</option> 
			<option value="1938">1938</option> 
			<option value="1939">1939</option> 
			<option value="1940">1940</option> 
			<option value="1941">1941</option> 
			<option value="1942">1942</option> 
			<option value="1943">1943</option> 
			<option value="1944">1944</option> 
			<option value="1945">1945</option> 
			<option value="1946">1946</option> 
			<option value="1947">1947</option> 
			<option value="1948">1948</option> 
			<option value="1949">1949</option> 
			<option value="1950">1950</option> 
			<option value="1951">1951</option> 
			<option value="1952">1952</option> 
			<option value="1953">1953</option> 
			<option value="1954">1954</option> 
			<option value="1955">1955</option> 
			<option value="1956">1956</option> 
			<option value="1957">1957</option> 
			<option value="1958">1958</option> 
			<option value="1959">1959</option> 
			<option value="1960">1960</option> 
			<option value="1961">1961</option> 
			<option value="1962">1962</option> 
			<option value="1963">1963</option> 
			<option value="1964">1964</option> 
			<option value="1965">1965</option> 
			<option value="1966">1966</option> 
			<option value="1967">1967</option> 
			<option value="1968">1968</option> 
			<option value="1969">1969</option> 
			<option value="1970">1970</option> 
			<option value="1971">1971</option> 
			<option value="1972">1972</option> 
			<option value="1973">1973</option> 
			<option value="1974">1974</option> 
			<option value="1975">1975</option> 
			<option value="1976">1976</option> 
			<option value="1977">1977</option> 
			<option value="1978">1978</option> 
			<option value="1979">1979</option> 
			<option value="1980">1980</option> 
			<option value="1981">1981</option> 
			<option value="1982">1982</option> 
			<option value="1983">1983</option> 
			<option value="1984">1984</option> 
			<option value="1985">1985</option> 
			<option value="1986">1986</option> 
			<option value="1987">1987</option> 
			<option value="1988">1988</option> 
			<option value="1989">1989</option> 
			<option value="1990">1990</option> 
			<option value="1991">1991</option> 
			<option value="1992">1992</option> 
			<option value="1993">1993</option> 
			<option value="1994">1994</option> 
			<option value="1995">1995</option> 
			<option value="1996">1996</option> 
			<option value="1997">1997</option> 
			<option value="1998">1998</option> 
 
		</select> 
年 
<select name="birthdatemonth" id="birthdatemonth"> 
		<option value="">------</option> 
			<option value="1">1</option> 
			<option value="2">2</option> 
			<option value="3">3</option> 
			<option value="4">4</option> 
			<option value="5">5</option> 
			<option value="6">6</option> 
			<option value="7">7</option> 
			<option value="8">8</option> 
			<option value="9">9</option> 
			<option value="10">10</option> 
			<option value="11">11</option> 
			<option value="12">12</option> 
 
		</select> 
月 
<select name="birthdateday" id="birthdateday"> 
<option value="">------</option> 
			<option value="1">1</option> 
			<option value="2">2</option> 
			<option value="3">3</option> 
			<option value="4">4</option> 
			<option value="5">5</option> 
			<option value="6">6</option> 
			<option value="7">7</option> 
			<option value="8">8</option> 
			<option value="9">9</option> 
			<option value="10">10</option> 
			<option value="11">11</option> 
			<option value="12">12</option> 
			<option value="13">13</option> 
			<option value="14">14</option> 
			<option value="15">15</option> 
			<option value="16">16</option> 
			<option value="17">17</option> 
			<option value="18">18</option> 
			<option value="19">19</option> 
			<option value="20">20</option> 
			<option value="21">21</option> 
			<option value="22">22</option> 
			<option value="23">23</option> 
			<option value="24">24</option> 
			<option value="25">25</option> 
			<option value="26">26</option> 
			<option value="27">27</option> 
			<option value="28">28</option> 
			<option value="29">29</option> 
			<option value="30">30</option> 
			<option value="31">31</option> 
 
		</select> 
日</TD>
</TR>
<TR>
<TD class="text">*婚姻:</TD>
<TD><div id="errorsDiv_maritalstatus"></div><select name="maritalstatus" id="maritalstatus"> 
<option value="">选择...</option> 
			<option value="2">已婚</option> 
			<option value="1">单身</option> 
			</select>
 </TD>
</TR>
<TR>
<TD class="text">*国籍:</TD>
<TD><div id="errorsDiv_nationality"></div><INPUT class="input" type="text" name="nationality" id="nationality" value="" /></TD>
</TR>
<TR>
<TD class="text">*职业:</TD>
<TD><div id="errorsDiv_occupation"></div><INPUT class="input" type="text" name="occupation" id="occupation" value="" /></TD>
</TR>
<TR>
<TD class="text">*年收入:</TD>
<TD><div id="errorsDiv_householdincome"></div>
<select name="householdincome" id="householdincome" > 
					<option value="">选择...</option> 
					<option value="1">&lt;1.8万</option> 
					<option value="2">1.8万-2.5万</option> 
					<option value="3">2.5万-3.5万</option> 
					<option value="4">3.5万-4.5万</option> 
					<option value="5">5.5万-7.5万</option> 
					<option value="6">7.5万-10万</option> 
					<option value="7">10万以上</option> 
 </TD>
</TR>
<TR>
<TD class="text">*教育程度:</TD>
<TD><div id="errorsDiv_education"></div><select name="education" id="education"> 
<option value="">选择...</option> 
					<option value="1">中学</option> 
					<option value="2">高中/中专</option> 
					<option value="3">本科/大专</option> 
					<option value="4">硕士</option> 
					<option value="5">博士</option> 
 
				</select></TD>
</TR>
<TR>
<TD class="text">*您有私人汽车吗?:</TD>
<TD><div id="errorsDiv_havecar"></div><select name="havecar" id="havecar"> 
<option value="">选择...</option> 
					<option value="1">是</option> 
					<option value="2">否</option> 
 
				</select></TD>
</TR>
<TR>
<TD class="text">*会讲英语吗?:</TD>
<TD><div id="errorsDiv_speakenglish"></div><select name="speakenglish" id="speakenglish"> 
<option value="">选择...</option> 
					<option value="1">会</option> 
					<option value="2">不会</option> 
 
				</select></TD>
</TR>


<TR>
<TD class="text"></TD>
<TD class="text" style="text-align:left;">三    其他信息</TD>
</TR>

<TR>
<TD class="text">您的最大兴趣是什么？</TD>
<TD><div id="errorsDiv_interests"></div><INPUT class="input" type="text" name="interests" id="interests" value="" /></TD>
</TR>
<TR>
<TD class="text">*您是如何知道SPOT? </TD>
<TD><div id="errorsDiv_hearabout"></div>
<select name="hearabout" id="hearabout"> 
<option value="">选择...</option> 
			<option value="1">朋友介绍</option> 
			<option value="2">网上广告</option> 
			<option value="3">路牌广告</option> 
			<option value="4">报纸</option> 
			<option value="5">电视</option> 
			<option value="6">其他</option> 
			</select></TD>
</TR>
<TR>
<TD class="text">你是否需要平时收到我们SPOT的最新动态? </TD>
<TD><div id="errorsDiv_newletters"></div><select name="newletters" id="newletters"> 
<option value="">选择...</option> 
			<option value="1">要</option> 
			<option value="2">不要</option> 
			</select></TD>
</TR>


<TR><TD class="text">&nbsp;</TD><TD>
  <input name="button" type="submit" class="btn" id="button" value="<?php echo lang('signup')?>" /> 

</TD>
</TR>
</TABLE>
</form>

<SCRIPT>
//only for test purposes
function checkOnSubmit(formName, r) {
   // document.getElementById(yav_config.errorsdiv).className = '';
   // document.getElementById(yav_config.errorsdiv).style.display = 'none';
   // var alertType = document.getElementById('alertType').value;
    if (yav.performCheck(formName, r, 'inline')) {
    	
    	var url = "<?php echo $www_site_url?>/index.php";
		var params = mini.form.serialize($(formName));
		mini.ajax.post(url, function(r){
		
			var r = eval('(' + r + ')');   
			if(r.s==200){
				window.location.href = r.d;
			}
			if(r.s==400){
				//$('msg').innerHTML = r.m;
				alert(r.m);
			}
		}, params);
    	
    	return false;
       
    } 
    return false;
}

var rules=new Array();
rules[0]='realname|required|<?php echo lang('realnamerule')?>';
rules[1]='mobile|required|请正确的手机号码';
rules[2]='mobile|regexp|^1\\d{10}$|请正确的手机号码';
rules[3]='phone|required|请输入电话';
rules[4]='qq|required|请输入QQ';
rules[5]='msn|required|请输入MSN';
rules[6]='area|required|请输入居住城市/区';

rules[7]='birthdateyear|required|请输入你的生日';
rules[8]='maritalstatus|required|请选择婚姻情况';
rules[9]='nationality|required|请输入你的国籍';
rules[10]='occupation|required|请输入你的职业';
rules[11]='householdincome|required|请选择你的年收入水平';
rules[12]='education|required|请选择你的教育程度';
rules[13]='havecar|required|请选择你的是否有私家车';
rules[14]='hearabout|required|请选择你是如何知道SPOT';



yav.addHelp('realname', '<?php echo lang('realnamerule')?>');
yav.addHelp('mobile', '');
yav.addHelp('phone', '');
yav.addHelp('qq', '');
yav.addHelp('msn', '');
yav.addHelp('area', '');

yav.addHelp('birthdateyear', '');
yav.addHelp('maritalstatus', '');
yav.addHelp('nationality', '');
yav.addHelp('occupation', '');
yav.addHelp('householdincome', '');
yav.addHelp('education', '');
yav.addHelp('havecar', '');
yav.addHelp('hearabout', '');

var captchaOK = 2;  // 2 - not yet checked, 1 - correct, 0 - failed
var account = '';
// a simple ajax implementation

function ajaxCall(s) {
	account = s;
	mini.ajax.get("<?php echo $www_site_url?>/index.php/passport/checkuser/user/" + escape(document.getElementById(s).value), function(r){
	    captchaOK = r;  
	    if(captchaOK != 1) {              
	      	yav.displayMsg(account, '<?php echo lang('userexist')?>', yav_config.innererror);
	      	document.registerform.registerbtn.disabled=true;
	      	return false;
	      } else {
	          yav.displayMsg(account, '<?php echo lang('userisok')?>', yav_config.innerhelp);      
	          document.registerform.registerbtn.disabled=false;
	          return true;
	      }
	});  
    return false;
}

window.onload = function(){
	yav.init('registerform', rules);
}
</SCRIPT>
<p>&nbsp;</p>
  </div>
</div>
</div>
<?php include_once("footer.html")?>
